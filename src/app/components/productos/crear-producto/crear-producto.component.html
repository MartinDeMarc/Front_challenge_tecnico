<app-toolbar></app-toolbar>

<div class="container mt-5">
    <div class="row">
        <div class="col-lg-6 offset-lg-3">
            <div class="card">
                <div class="card-body text-center">
                    <span class="titulo"> {{ titulo }}</span>

                    <form [formGroup]="productoForm" (ngSubmit)="guardarProducto()"> 

                    <div class="form-group mt-5">
                    <mat-form-field class="w-100">
                        <mat-label>Nombre</mat-label>
                        <input type="text" matInput formControlName="nombre" (blur)="updateErrorMessage()">
                        <mat-error *ngIf="productoForm.get('nombre')?.invalid && errorMessageNombre">{{errorMessageNombre}}</mat-error>
                      </mat-form-field>
                     </div>



                    <div class="form-group">
                      <mat-form-field class="w-100">
                          <mat-label>Tipo</mat-label>
                          <mat-select formControlName="tipo" (blur)="updateErrorMessage()">
                              <mat-option *ngFor="let type of tipos" [value]="type">{{ type }}</mat-option>
                          </mat-select>
                          <mat-error *ngIf="productoForm.get('tipo')?.invalid && errorMessageTipo">{{errorMessageTipo}}</mat-error>
                      </mat-form-field>
                  </div>

                    <div class="form-group"> 
                      <mat-form-field class="w-100" >
                        <mat-label>Precio</mat-label>
                        <input type="number" placeholder="0" matInput formControlName="precio" (blur)="updateErrorMessage()">
                        <mat-error *ngIf="productoForm.get('precio')?.invalid && errorMessage">{{errorMessage}}</mat-error>
                      </mat-form-field>
                    </div>

                    <div class="form-group">
                      <mat-form-field class="w-100">
                          <mat-label>Ingredientes</mat-label>
                          <input type="text" matInput formControlName="ingredientes" placeholder="Ingrese los ingredientes separados por comas" (blur)="updateErrorMessage()">
                          <mat-error *ngIf="productoForm.get('ingredientes')?.invalid && errorMessageIngredientes">{{errorMessageIngredientes}}</mat-error>
                      </mat-form-field>
                  </div>

                  <!-- <div class="form-group mt-3">
                    <input type="file" 
                    (change)="subirImagen($event)"
                           accept="image/*"
                           #fileInput
                           style="display: none">
                    <button type="button" 
                            mat-raised-button 
                            color="primary" 
                            (click)="fileInput.click()">
                        <mat-icon>cloud_upload</mat-icon>
                        Subir Imagen
                    </button>
                    <span *ngIf="selectedFile">{{ selectedFile.name }}</span>
                </div> -->


                    <div class="text-right mt-3"> 
                          <button routerLink="/productos" mat-fab extended class="btn-lg float-start">
                            <mat-icon>arrow_back</mat-icon>
                            Volver
                          </button>

                          <button type="submit" mat-fab extended class="btn-lg float-end" [disabled]="productoForm.invalid">
                            <mat-icon>save</mat-icon>
                            Guardar
                          </button>
                      </div>

                    </form>

                </div>
            </div>
        </div>
    </div>
</div>